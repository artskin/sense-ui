<!DOCTYPE html>
<html lang="cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <link rel="icon" href="./favicon.svg">
  <title>2025双11必领红包和神券</title>
  <meta name="keywords" content="双十一,好价分享" />
  <meta name="description" content="双11好价分享，最高1111元无门槛红包，京东和淘宝都有，分享给好友，好友也可以领取，最高1111元，你不亏！" />
  <link rel="stylesheet" href="./style/html-native-ui.min.css">
  <style>
    @import './style/11.css';
  </style>
</head>
<body class="sense-ui">
  <header>
    <h1 title="双十一无门槛红包">双11每日红包</h1>
  </header>
  <main class="bg-red-100">
    <section class="redpack">
      <h2 class="title2">每日可领，最高1111元无门槛红包</h2>
      <div class="col">
        <div class="jd">
          <div class="red-wrap">
            <a href="https://u.jd.com/BG3Mqiv" data-clipboard-target="#jdcode" class="btn" target="_blank">
               <span>京东</span>
              <em>🧧领取</em>
            </a>
          </div>
        </div>
        <div class="tb">
          
          <div class="red-wrap" data-clipboard-text="0$uPMCfXieLzW$:// MU5183">
            <a href="javascript:void(0);" data-action="copy" data-clipboard-target="#tbcode" class="btn">
               <span>淘宝</span>
              <em>🧧领取</em>
            </a>
            <input id="jdcode" type="hidden" value="15:/抢紅包，购痛快~最高11111元紅包等你来！￥B3s9E0ah6xBRMh5G￥ MF5681 ，⇴亰▾Dσδδng"/>
            <input id="tbcode" type="hidden" value="0$uPMCfXieLzW$:// MU5183"/>
          </div>
        </div>
      </div>
    </section>
    <section>
      <h2 class="title2">必领神券</h2>
      <div class="">
        <div class="quan">
          <dl class="col">
            <dt>
              <small>￥</small>
              <em>50</em>
            </dt>
            <dd>
              <span>
                家电家具5折神券<br>
                满100元可用<br>
                至高膨胀至1000元
              </span>
              <p>
                <em id="countdown">--:--:--</em>
                <a class="btn btn-primary" data-action="copy" data-clipboard-text="https://u.jd.com/BOfEUiM" href="javascript:void(0);">20:00开枪</a>
              </p>
            </dd>
          </dl>
        </div>
      </div>
    </section>
  </main>
<dialog class="dialog-success-tip">
  <div class="tip-content">loading</div>
  <!-- <form method="dialog">
    <button>关闭</button>
  </form> -->
</dialog>
<div class="dialog-mask"></div>
<script src="./js/clipboard.min.js" type="text/javascript"></script>
<script>
 const clipboard = new ClipboardJS('.btn');
 const dialog = document.querySelector('dialog');
 clipboard.on('success', function(e) {
    console.info('Text:', e,e.trigger.dataset.action);
    if(e?.trigger?.dataset?.action ==='copy'){
      const appName = e.text.includes('jd') ? "京东":"淘宝"
      dialog.querySelector('.tip-content').innerHTML = `口令已领取，请打开 <strong class="text-primary">${appName}</strong> App收红包`;
      dialog.show();
      setTimeout(() => {
        dialog.close();
      }, 2000);
    }
    
    e.clearSelection();
  });
  // 获取DOM元素
  const countdownElement = document.getElementById('countdown');
  let animationFrameId = null;
  let lastUpdateTime = 0;

  // 获取今日20点的时间戳
  function getTargetTime() {
      const now = new Date();
      // 创建今日20点的时间对象
      const targetTime = new Date(now);
      targetTime.setHours(20, 0, 0, 0); // 设置为20:00:00.000
      
      // 如果当前时间已过今日20点，则目标时间为明日20点
      if (now > targetTime) {
          targetTime.setDate(targetTime.getDate() + 1);
      }
      
      return targetTime.getTime();
  }

  // 格式化时间，确保两位数显示
  function formatTime(number) {
      return number.toString().padStart(2, '0');
  }

  // 更新倒计时显示
  function updateCountdown(timestamp) {
      // 使用requestAnimationFrame的时间戳参数
      if (!lastUpdateTime) lastUpdateTime = timestamp;
      const elapsed = timestamp - lastUpdateTime;
      
      // 每秒更新一次
      if (elapsed >= 1000) {
          lastUpdateTime = timestamp;
          
          const targetTime = getTargetTime();
          const now = Date.now();
          const timeDifference = targetTime - now;

          // 检查倒计时是否结束
          if (timeDifference <= 0) {
              countdownElement.textContent = "00:00:00";
              cancelAnimationFrame(animationFrameId);
              
              // 添加动画效果
              countdownElement.style.transform = 'scale(1.2)';
              setTimeout(() => {
                  countdownElement.style.transform = 'scale(1)';
                  // 重新开始倒计时（指向下一个20点）
                  initCountdown();
              }, 500);
              return;
          }

          // 计算剩余的小时、分钟和秒
          const hours = Math.floor(timeDifference / (1000 * 60 * 60));
          const minutes = Math.floor((timeDifference % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((timeDifference % (1000 * 60)) / 1000);

          // 更新显示
          countdownElement.textContent = `${formatTime(hours)}:${formatTime(minutes)}:${formatTime(seconds)}`;
          
          // 更新状态提示
          if (hours === 0 && minutes < 10) {
              // 添加动画效果
              if (seconds % 2 === 0) {
                  countdownElement.style.color = '#ff6b35';
              } else {
                  countdownElement.style.color = '#333';
              }
          } else {
              countdownElement.style.color = '#333';
          }
      }
      
      // 继续动画循环
      animationFrameId = requestAnimationFrame(updateCountdown);
  }

  // 初始化倒计时
  function initCountdown() {
      // 清除现有动画帧
      if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
      }
      
      // 重置变量
      lastUpdateTime = 0;
      
      // 启动动画循环
      animationFrameId = requestAnimationFrame(updateCountdown);
  }

  // 页面加载完成后启动倒计时
  window.addEventListener('load', initCountdown);
  
  // 页面可见性变化时重新同步时间
  document.addEventListener('visibilitychange', function() {
      if (!document.hidden) {
          initCountdown();
      }
  });
</script>

</body>
</html>
